<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Sistema de Capacitaciones</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;600;700;800&family=Fraunces:wght@700;800&display=swap"
        rel="stylesheet">
</head>

<body data-page="dashboard">
    <div class="dashboard">
        <!-- Navigation will be inserted here -->
        <div id="navigation"></div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <h1 class="page-title">Dashboard</h1>
                <div class="header-actions">

                    <!-- BOTÃ“N HISTORIAL -->
                    <button class="btn btn-outline" onclick="window.location.href='historial_log.html'">
                        ðŸ“‹ Historial
                    </button>

                    <!-- BOTÃ“N ACTUALIZAR -->
                    <button class="btn btn-secondary" onclick="location.reload()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
                        </svg>
                        Actualizar
                    </button>

                </div>
            </header>

            <!-- Alert Container -->
            <div id="alertContainer"></div>

            <!-- Dashboard Content -->
            <section class="content-section">
                <!-- Stats Grid -->
                <div class="stats-grid">
                    <!-- Overall Health Score -->
                    <div class="health-score-card">
                        <div class="health-score-content">
                            <div class="health-score-title">Salud de la Base de Datos</div>
                            <div class="health-score-value" id="healthScoreValue">--</div>
                            <div class="health-score-label" id="healthScoreLabel">Calculando...</div>
                        </div>
                        <div class="health-score-visual">
                            <svg class="health-score-circle">
                                <circle class="circle-bg" cx="80" cy="80" r="70"></circle>
                                <circle class="circle-progress" id="healthCircle" cx="80" cy="80" r="70"></circle>
                            </svg>
                            <div class="health-score-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
                                    <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" />
                                </svg>
                            </div>
                        </div>
                    </div>

                    <!-- Cursos Duplicados -->
                    <a href="cursos.html?filter=duplicados" class="stat-card stat-card-link">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="cursosDuplicados">0</div>
                                <div class="stat-label">Posibles Duplicados</div>
                            </div>
                            <div class="stat-icon stat-icon-purple">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                                </svg>
                            </div>
                        </div>
                        <div class="stat-progress">
                            <div class="stat-percentage">
                                <span class="stat-percentage-label">Porcentaje</span>
                                <span class="stat-percentage-value" id="cursosDuplicadosPct">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="cursosDuplicadosBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="stat-action">
                            <span>Click para revisar â†’</span>
                        </div>
                    </a>

                    <!-- Cursos sin Estado -->
                    <a href="cursos.html?filter=sin_estado" class="stat-card stat-card-link">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="cursosSinEstado">0</div>
                                <div class="stat-label">Cursos sin Estado</div>
                            </div>
                            <div class="stat-icon stat-icon-green">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
                                </svg>
                            </div>
                        </div>
                        <div class="stat-progress">
                            <div class="stat-percentage">
                                <span class="stat-percentage-label">Porcentaje</span>
                                <span class="stat-percentage-value" id="cursosSinEstadoPct">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="cursosSinEstadoBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="stat-action">
                            <span>Click para asignar estado â†’</span>
                        </div>
                    </a>

                    <!-- Cursos Inactivos -->
                    <a href="cursos.html?filter=inactivos" class="stat-card stat-card-link">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="cursosInactivos">0</div>
                                <div class="stat-label">Cursos Inactivos</div>
                            </div>
                            <div class="stat-icon stat-icon-orange">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                                </svg>
                            </div>
                        </div>
                        <div class="stat-progress">
                            <div class="stat-percentage">
                                <span class="stat-percentage-label">Porcentaje</span>
                                <span class="stat-percentage-value" id="cursosInactivosPct">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="cursosInactivosBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="stat-action">
                            <span>Click para revisar â†’</span>
                        </div>
                    </a>

                    <!-- Colaboradores sin Puesto -->
                    <a href="colaboradores.html?filter=sin_puesto" class="stat-card stat-card-link">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="colabSinPuesto">0</div>
                                <div class="stat-label">Colaboradores sin Puesto</div>
                            </div>
                            <div class="stat-icon stat-icon-blue">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                                </svg>
                            </div>
                        </div>
                        <div class="stat-progress">
                            <div class="stat-percentage">
                                <span class="stat-percentage-label">Porcentaje</span>
                                <span class="stat-percentage-value" id="colabSinPuestoPct">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="colabSinPuestoBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="stat-action">
                            <span>Click para asignar puesto â†’</span>
                        </div>
                    </a>
                </div>
    </div>

    </section>
    </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <script src="js/globals.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="components/authGuard.js"></script>
    <script src="components/nav.js"></script>

</body>

</html>